{% extends "header.html" %} 
{% block title %}<title>Home</title>{% endblock %}
{% block content %}
{% load static %}
<div class="container-fluid" style="margin-top: 2px; font-family: helvetica;">
  <div class="pet-cards-flex">
      {% for profile in profiles %}
      {% if user.id != profile.user.id %}
      <div class="pet-card" onclick="openPopup('{{ profile.name }}', '{{ profile.gender }}','{{ profile.breed }}', '{{ profile.birthday }}', '{{ age }}','{{ profile.location }}')">
          <a href="javascript:void(0);" style="text-decoration: none;">
              <img src="{{ profile.profile_picture.url }}" alt="{{ profile.name }}">
              <div class="pet-info">
                  <h1 style="font-size: 32px;">{{ profile.name }}</h1>
                  <h3 style="font-size: 16px;">{{ profile.breed }}</h3>
                  <p>{{ profile.location }}</p>
              </div>
          </a>
      </div>
      {% endif %}
      {% endfor %}
  </div>
</div>

<!-- Overlay -->
<div class="overlay" id="overlay" onclick="closePopup()"></div>

<!-- Pop-up -->
<div class="popup" id="popup">
  <div class="popup-header">
    <span class="close-btn" id="closePopup" onclick="closePopup()">X</span>
  </div>
  <div class="popup-content">
    <h1 id="popupName" style="font-weight: bold;">Name</h1>
    <p id="popupDetails">Gender <i>(Breed)</i></p>
    <p id="popupBirthday">üéÇ Birthday (Age)</p>
    <p id="popupLocation">üìç Location</p>
    <div class="message-box">
      <input type="text" placeholder="Send a message...">
      <button>‚û§</button>
    </div>
  </div>
</div>

<script>
function openPopup(name, gender, breed, birthday, age, location) {
    document.getElementById('popupName').innerText = name;
    document.getElementById('popupDetails').innerText = `${gender} | (${breed})`;
    document.getElementById('popupBirthday').innerText = `üéÇ ${birthday} (${age} years old)`;
    document.getElementById('popupLocation').innerText = `üìç ${location}`;
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('popup').style.display = 'block';
}

function closePopup() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('popup').style.display = 'none';
}
</script>

<script>
const heartIcons = document.querySelectorAll('.heart-icon');

heartIcons.forEach(icon => {
  icon.addEventListener('click', () => {
    icon.classList.toggle('clicked');
  });
});

// Elements
const showPopup = document.getElementById("showPopup");
const closePopup = document.getElementById("closePopup");
const overlay = document.getElementById("overlay");
const popup = document.getElementById("popup");

// Show pop-up
showPopup.addEventListener("click", function (e) {
  e.preventDefault();
  overlay.style.display = "block";
  popup.style.display = "block";
});

// Hide pop-up
closePopup.addEventListener("click", function () {
  overlay.style.display = "none";
  popup.style.display = "none";
});

// Close overlay
overlay.addEventListener("click", function () {
  overlay.style.display = "none";
  popup.style.display = "none";
});

const images = [
  {% for image_url in images %}
    "{{ image_url }}",
  {% endfor %}
];

console.log('Images array:', images);

let currentIndex = 0;
const galleryImage = document.getElementById('galleryImage');

if (galleryImage) {
  console.log('Gallery image element found:', galleryImage);
} else {
  console.error('Gallery image element not found');
}

function showImage(index) {
  if (images.length > 0) {
    galleryImage.src = images[index];
    galleryImage.style.display = 'block';
    console.log('Showing image:', images[index]);
  } else {
    console.error('No images to display');
  }
}

document.getElementById('prevBtn').addEventListener('click', function() {
  currentIndex = (currentIndex > 0) ? currentIndex - 1 : images.length - 1;
  showImage(currentIndex);
});

document.getElementById('nextBtn').addEventListener('click', function() {
  currentIndex = (currentIndex < images.length - 1) ? currentIndex + 1 : 0;
  showImage(currentIndex);
});

// Show the first image initially
showImage(currentIndex);
</script>

{% endblock %}